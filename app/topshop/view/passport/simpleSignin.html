<form action="<{url action=topshop_ctl_passport@login}>" method="post" id="login_form" class="bg-white form-box" data-validate-onsuccess="ajaxSubmit">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
    <h4 class="modal-title" id="myModalLabel">登录商家中心</h4>
  </div>
  <div class="modal-body">
    <div class="form-group">
      <label for="userid" class="sr-only"><{t}>用户名<{/t}>：</label>
      <input type="text" name="login_account" id="userid" class="form-control" placeholder="<{t}>账号<{/t}>" required>
    </div>
    <div class="form-group">
      <label for="password" class="sr-only"><{t}>密码<{/t}>：</label>
      <input type="password" name="login_password" id="password" class="form-control" placeholder="<{t}>密码<{/t}>" required>
    </div>
    <div class="form-group">
	        <label for="imgcode" class="sr-only"><{t}>验证码<{/t}>：</label>
	        <div class="col-xs-5" style="padding:0px;">
	          <input type="text" name="imgcode" id="img-code" class="form-control" placeholder="<{t}>验证码<{/t}>" required>
	        </div>
	        <div class="pull-right">
	        <img align="absmiddle" class="auto-change-verify-handle" id="membervocde" src="<{url action=toputil_ctl_vcode@gen_vcode key=topshop_bind}>" alt="验证码" width="100" height="30">
				<p class="inline auto-change-verify-handle"><span><{t}>看不清？<{/t}></span><a href="javascript:void(0);"><{t}>换一张<{/t}></a></p>
	        <input type="hidden" name="imagevcodekey" value="topshop_bind" />
	        </div>
	        <div class="clearfix"></div>
	  </div>
  </div>
  <div class="footer modal-footer">
    <p>
      <button type="submit" class="btn bg-teal btn-block btn-lg"><{t}>登录<{/t}></button>
    </p>
    <p class="fl">
      <a href="<{url action=topshop_ctl_passport@signup}>" class="text-center"><{t}>注册新用户<{/t}></a>
    </p>
    <div class="fr">
      <label><input type="checkbox" name="remember_me"> <{t}>记住我<{/t}></label>
    </div>
    <div class="cl"></div>
  </div>
</form>
<script>
  $('#login_form').Validator({
    icons: {
      valid:      'icon icon-checkmark-a',
      invalid:    'icon icon-alert',
      validating: 'icon icon-loading-c'
    }
  });
  function ajaxSubmit(e) {
    var form = e.target;
    e.preventDefault();
    $.post(form.action, $(form).serialize(), function(rs) {
      if(rs.error) {
        $('#messagebox').message(rs.message);
        return;
      }
      if(rs.success) {
        $('#messagebox').message(rs.message, 'success');
      }

      setTimeout(function(){location.reload();}, 1000);

    });
  }
</script>
